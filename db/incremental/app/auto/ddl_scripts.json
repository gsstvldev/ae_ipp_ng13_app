[{"query" : "CREATE TABLE NPSS_NOTIFICATION_LOGS ( NPSSNL_ID INTEGER NOT NULL , CHANNEL_ID CHARACTER VARYING(32) NULL, CHANNEL_REF_NO CHARACTER VARYING(32) NULL, STATUS_CODE CHARACTER VARYING(32) NULL, ORDER_CUST_ACC_NO CHARACTER VARYING(32) NULL, AMOUNT CHARACTER VARYING(32) NULL, STATUS_DESCRIPTION CHARACTER VARYING(256) NULL, KAFKA_MESSAGE CHARACTER VARYING(80000) NULL, COMMPD_ID INTEGER NULL, COMMPM_ID INTEGER NULL, COMMPML_ID INTEGER NULL, CREATED_BY CHARACTER VARYING(256) NOT NULL,  CREATED_BY_NAME CHARACTER VARYING(256) , CREATED_DATE timestamp without time zone NOT NULL, MODIFIED_BY CHARACTER VARYING(256), MODIFIED_BY_NAME CHARACTER VARYING(256), MODIFIED_DATE timestamp without time zone, SYSTEM_ID CHARACTER VARYING(256),  SYSTEM_NAME CHARACTER VARYING(256),  PRCT_ID CHARACTER VARYING(256), CREATED_BY_STS_ID CHARACTER VARYING(256),  MODIFIED_BY_STS_ID CHARACTER VARYING(256),  STATUS CHARACTER VARYING(256), PROCESS_STATUS CHARACTER VARYING(256), DT_CODE CHARACTER VARYING(256), DT_DESCRIPTION CHARACTER VARYING(256) , DTT_CODE CHARACTER VARYING(256), DTT_DESCRIPTION CHARACTER VARYING(256), APP_ID CHARACTER VARYING(256), ROUTINGKEY CHARACTER VARYING(256), CREATED_CLIENTIP CHARACTER VARYING(256), CREATED_TZ CHARACTER VARYING(256), CREATED_TZ_OFFSET CHARACTER VARYING(256), CREATED_BY_SESSIONID CHARACTER VARYING(512), MODIFIED_CLIENTIP CHARACTER VARYING(256), MODIFIED_TZ CHARACTER VARYING(256), MODIFIED_TZ_OFFSET CHARACTER VARYING(256), MODIFIED_BY_SESSIONID CHARACTER VARYING(512), FX_RESV_DATE1 timestamp without time zone, FX_RESV_DATE2 timestamp without time zone, FX_RESV_DATE3 timestamp without time zone, FX_RESV_DATE4 timestamp without time zone, FX_RESV_DATE5 timestamp without time zone, FX_RESV_TEXT1 CHARACTER VARYING(256), FX_RESV_TEXT2 CHARACTER VARYING(256), FX_RESV_TEXT3 CHARACTER VARYING(256), FX_RESV_TEXT4 CHARACTER VARYING(256), FX_RESV_TEXT5 CHARACTER VARYING(256), CREATED_DATE_UTC timestamp without time zone, MODIFIED_DATE_UTC timestamp without time zone, VERSION_NO integer DEFAULT 0, TENANT_ID CHARACTER VARYING(256) , AI_ID CHARACTER VARYING(256)  ); CREATE SEQUENCE SEQ_NPSS_NOTIFICATION_LOGS INCREMENT 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 20;  ALTER TABLE NPSS_NOTIFICATION_LOGS ALTER COLUMN NPSSNL_ID SET DEFAULT nextval(''SEQ_NPSS_NOTIFICATION_LOGS'');  ALTER TABLE NPSS_NOTIFICATION_LOGS ADD CONSTRAINT NPSS_NOTIFICATION_LOGS_pkey primary key(NPSSNL_ID); ","params" : [] },{"query" : "CREATE OR REPLACE FUNCTION TRG_FN_NPSS_NOTIFICATION_LOGS() RETURNS trigger  LANGUAGE ''plpgsql''  COST 100  VOLATILE NOT LEAKPROOF  AS  $BODY$  DECLARE  BEGIN IF TG_OP = ''INSERT'' THEN  NEW.version_no = 1;  INSERT INTO HST_TRAN_DATA(TRAN_ID,PRCT_ID,VERSION_NO,DTT_CODE,STATUS,PROCESS_STATUS,TABLE_NAME, DTT_DESCRIPTION, NEW_DATA_JSON,CREATED_BY,CREATED_DATE,APP_ID,TENANT_ID,ROUTINGKEY)  SELECT NEW.NPSSNL_ID,NEW.PRCT_ID,NEW.VERSION_NO,NEW.DTT_CODE,NEW.STATUS,NEW.PROCESS_STATUS,TG_TABLE_NAME, NEW.DTT_DESCRIPTION,ROW_TO_JSON(ROW),NEW.CREATED_BY,NEW.CREATED_DATE,NEW.APP_ID,NEW.TENANT_ID,NEW.ROUTINGKEY FROM (SELECT NEW.*)ROW; ELSIF TG_OP = ''UPDATE'' THEN  NEW.version_no = OLD.version_no +1;  INSERT INTO HST_TRAN_DATA(TRAN_ID,PRCT_ID,VERSION_NO,DTT_CODE,STATUS,PROCESS_STATUS,TABLE_NAME, DTT_DESCRIPTION, NEW_DATA_JSON,OLD_DATA_JSON,CREATED_BY,CREATED_DATE,APP_ID,TENANT_ID,ROUTINGKEY)  SELECT NEW.NPSSNL_ID,NEW.PRCT_ID,NEW.VERSION_NO,NEW.DTT_CODE,NEW.STATUS,NEW.PROCESS_STATUS,TG_TABLE_NAME, NEW.DTT_DESCRIPTION,ROW_TO_JSON(ROW), ROW_TO_JSON(ROW1),NEW.MODIFIED_BY,NEW.MODIFIED_DATE,NEW.APP_ID,NEW.TENANT_ID,NEW.ROUTINGKEY FROM (SELECT NEW.*)ROW ,(SELECT OLD.*)ROW1; END IF; RETURN NEW; END; $BODY$;  CREATE TRIGGER HTG_NPSS_NOTIFICATION_LOGS BEFORE INSERT OR UPDATE  ON NPSS_NOTIFICATION_LOGS FOR EACH ROW  EXECUTE PROCEDURE TRG_FN_NPSS_NOTIFICATION_LOGS();  ALTER TABLE NPSS_NOTIFICATION_LOGS ENABLE TRIGGER HTG_NPSS_NOTIFICATION_LOGS ; ","params" : [] }]