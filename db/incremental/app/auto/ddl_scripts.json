[{"query" : "CREATE TABLE NPSS_CAMT53_STMT ( NCS_ID INTEGER NOT NULL , HDR_MSG_ID CHARACTER VARYING(64) NULL, HDR_CREATED_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, HDR_MSG_RCPT CHARACTER VARYING(64) NULL, HDR_MSG_RCPT_NAME CHARACTER VARYING(256) NULL, HDR_MSG_RCPT_ID CHARACTER VARYING(64) NULL, HDR_MSG_RCPT_ORGID CHARACTER VARYING(64) NULL, HDR_MSG_RCPT_ORG_BIC CHARACTER VARYING(64) NULL, HDR_MSG_PGNB INTEGER NULL, HDR_MSG_LAST_PG_IND CHARACTER VARYING(8) NULL, HDR_MSG_ADDTLINF CHARACTER VARYING(512) NULL, STMT_ID CHARACTER VARYING(64) NULL, STMT_SEQUENCE_NUMBER CHARACTER VARYING(64) NULL, STMT_CREATED_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, STMT_FROM_TO_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, STMT_TO_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, STMT_COPY_DUP_IND CHARACTER VARYING(16) NULL, ACCT_ID CHARACTER VARYING(32) NULL, SVCR_ACCT_ID CHARACTER VARYING(32) NULL, INSTN_ACCT_ID CHARACTER VARYING(64) NULL, PARENT_ACCT_ID CHARACTER VARYING(256) NULL, PARENT_SVCR_ACCT_ID CHARACTER VARYING(64) NULL, PARENT_INST_ACCT_ID CHARACTER VARYING(32) NULL, BALANCE_TYPE CHARACTER VARYING(64) NULL, BALANCE_TYPE_CODE_PROP CHARACTER VARYING(64) NULL, BALANCE_TYPE_PROP CHARACTER VARYING(64) NULL, BALANCE_AMOUNT NUMERIC(19,2) NULL, BALANCE_CRDB_IND CHARACTER VARYING(16) NULL, STMT_BAL_DATE TIMESTAMP WITHOUT TIME ZONE NULL, STMT_BAL_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, COUNT_INDV_ENTRIES CHARACTER VARYING(16) NULL, SUM_INDV_ENTRIES NUMERIC(19,2) NULL, COUNT_NET_ENTRIES CHARACTER VARYING(16) NULL, SUM_NET_ENTRIES NUMERIC(19,2) NULL, NET_CRDB_IND CHARACTER VARYING(32) NULL, TOT_CR_ENTRIES CHARACTER VARYING(32) NULL, SUM_CR_ENTRIES NUMERIC(19,2) NULL, TOT_DB_ENTRIES CHARACTER VARYING(32) NULL, SUM_DB_ENTRIES NUMERIC(19,2) NULL, ENTRY_REF CHARACTER VARYING(64) NULL, ENTRY_AMOUNT NUMERIC(19,2) NULL, ENTRY_CRDB_IND CHARACTER VARYING(32) NULL, ENTRY_STATUS CHARACTER VARYING(32) NULL, ENTRY_BK_DATE TIMESTAMP WITHOUT TIME ZONE NULL, ENTRY_BK_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, VALUE_DATE TIMESTAMP WITHOUT TIME ZONE NULL, VALUE_DATE_TIME TIMESTAMP WITHOUT TIME ZONE NULL, ACCT_SERV_REF CHARACTER VARYING(64) NULL, BANK_CODE_PROP CHARACTER VARYING(64) NULL, ORIG_AMOUNT NUMERIC(19,2) NULL, INSTD_AMOUNT NUMERIC(19,2) NULL, TXN_AMOUNT NUMERIC(19,2) NULL, BATCH_MSG_ID CHARACTER VARYING(64) NULL, BATCH_TXN_COUNT BIGINT NULL, BATCH_TOT_AMOUNT NUMERIC(19,2) NULL, BATCH_CRDB_IND CHARACTER VARYING(32) NULL, TXN_REF_MSGID CHARACTER VARYING(64) NULL, TXN_ACCSVC_REF CHARACTER VARYING(64) NULL, PAYMENT_INFO_INSTD_ID CHARACTER VARYING(64) NULL, PAYMENT_INFO_ETE_ID CHARACTER VARYING(64) NULL, UETR CHARACTER VARYING(64) NULL, TXN_ID CHARACTER VARYING(64) NULL, MANDATE_ID CHARACTER VARYING(64) NULL, CHEQUE_NUMBER CHARACTER VARYING(64) NULL, CLR_SYSTEM_REF CHARACTER VARYING(64) NULL, CASH_TXN_AMOUNT NUMERIC(19,2) NULL, TXN_CRDB_IND CHARACTER VARYING(64) NULL, INSTRUCTING_AGENT_ID CHARACTER VARYING(64) NULL, INSTRUCTING_FIN_INST_ID CHARACTER VARYING(64) NULL, INSTRUCTING_FIN_INST_BIC CHARACTER VARYING(32) NULL, INSTRUCTED_AGENT_ID CHARACTER VARYING(64) NULL, INSTRUCTED_FIN_INST_ID CHARACTER VARYING(64) NULL, DBTR_ID CHARACTER VARYING(64) NULL, DBTR_BIC CHARACTER VARYING(32) NULL, CDTR_ID CHARACTER VARYING(64) NULL, CDTR_BIC CHARACTER VARYING(32) NULL, CREATED_BY CHARACTER VARYING(256) NOT NULL,  CREATED_BY_NAME CHARACTER VARYING(256) , CREATED_DATE timestamp without time zone NOT NULL, MODIFIED_BY CHARACTER VARYING(256), MODIFIED_BY_NAME CHARACTER VARYING(256), MODIFIED_DATE timestamp without time zone, SYSTEM_ID CHARACTER VARYING(256),  SYSTEM_NAME CHARACTER VARYING(256),  PRCT_ID CHARACTER VARYING(256), CREATED_BY_STS_ID CHARACTER VARYING(256),  MODIFIED_BY_STS_ID CHARACTER VARYING(256),  STATUS CHARACTER VARYING(256), PROCESS_STATUS CHARACTER VARYING(256), DT_CODE CHARACTER VARYING(256), DT_DESCRIPTION CHARACTER VARYING(256) , DTT_CODE CHARACTER VARYING(256), DTT_DESCRIPTION CHARACTER VARYING(256), APP_ID CHARACTER VARYING(256), ROUTINGKEY CHARACTER VARYING(256), CREATED_CLIENTIP CHARACTER VARYING(256), CREATED_TZ CHARACTER VARYING(256), CREATED_TZ_OFFSET CHARACTER VARYING(256), CREATED_BY_SESSIONID CHARACTER VARYING(512), MODIFIED_CLIENTIP CHARACTER VARYING(256), MODIFIED_TZ CHARACTER VARYING(256), MODIFIED_TZ_OFFSET CHARACTER VARYING(256), MODIFIED_BY_SESSIONID CHARACTER VARYING(512), FX_RESV_DATE1 timestamp without time zone, FX_RESV_DATE2 timestamp without time zone, FX_RESV_DATE3 timestamp without time zone, FX_RESV_DATE4 timestamp without time zone, FX_RESV_DATE5 timestamp without time zone, FX_RESV_TEXT1 CHARACTER VARYING(256), FX_RESV_TEXT2 CHARACTER VARYING(256), FX_RESV_TEXT3 CHARACTER VARYING(256), FX_RESV_TEXT4 CHARACTER VARYING(256), FX_RESV_TEXT5 CHARACTER VARYING(256), CREATED_DATE_UTC timestamp without time zone, MODIFIED_DATE_UTC timestamp without time zone, VERSION_NO integer DEFAULT 0, TENANT_ID CHARACTER VARYING(256) , AI_ID CHARACTER VARYING(256)  ); CREATE SEQUENCE SEQ_NPSS_CAMT53_STMT INCREMENT 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 20;  ALTER TABLE NPSS_CAMT53_STMT ALTER COLUMN NCS_ID SET DEFAULT nextval(''SEQ_NPSS_CAMT53_STMT'');  ALTER TABLE NPSS_CAMT53_STMT ADD CONSTRAINT NPSS_CAMT53_STMT_pkey primary key(NCS_ID); ","params" : [] },{"query" : "CREATE OR REPLACE FUNCTION TRG_FN_NPSS_CAMT53_STMT() RETURNS trigger  LANGUAGE ''plpgsql''  COST 100  VOLATILE NOT LEAKPROOF  AS  $BODY$  DECLARE  BEGIN IF TG_OP = ''INSERT'' THEN  NEW.version_no = 1;  INSERT INTO HST_TRAN_DATA(TRAN_ID,PRCT_ID,VERSION_NO,DTT_CODE,STATUS,PROCESS_STATUS,TABLE_NAME, DTT_DESCRIPTION, NEW_DATA_JSON,CREATED_BY,CREATED_DATE,APP_ID,TENANT_ID,ROUTINGKEY)  SELECT NEW.NCS_ID,NEW.PRCT_ID,NEW.VERSION_NO,NEW.DTT_CODE,NEW.STATUS,NEW.PROCESS_STATUS,TG_TABLE_NAME, NEW.DTT_DESCRIPTION,ROW_TO_JSON(ROW),NEW.CREATED_BY,NEW.CREATED_DATE,NEW.APP_ID,NEW.TENANT_ID,NEW.ROUTINGKEY FROM (SELECT NEW.*)ROW; ELSIF TG_OP = ''UPDATE'' THEN  NEW.version_no = OLD.version_no +1;  INSERT INTO HST_TRAN_DATA(TRAN_ID,PRCT_ID,VERSION_NO,DTT_CODE,STATUS,PROCESS_STATUS,TABLE_NAME, DTT_DESCRIPTION, NEW_DATA_JSON,OLD_DATA_JSON,CREATED_BY,CREATED_DATE,APP_ID,TENANT_ID,ROUTINGKEY)  SELECT NEW.NCS_ID,NEW.PRCT_ID,NEW.VERSION_NO,NEW.DTT_CODE,NEW.STATUS,NEW.PROCESS_STATUS,TG_TABLE_NAME, NEW.DTT_DESCRIPTION,ROW_TO_JSON(ROW), ROW_TO_JSON(ROW1),NEW.MODIFIED_BY,NEW.MODIFIED_DATE,NEW.APP_ID,NEW.TENANT_ID,NEW.ROUTINGKEY FROM (SELECT NEW.*)ROW ,(SELECT OLD.*)ROW1; END IF; RETURN NEW; END; $BODY$;  CREATE TRIGGER HTG_NPSS_CAMT53_STMT BEFORE INSERT OR UPDATE  ON NPSS_CAMT53_STMT FOR EACH ROW  EXECUTE PROCEDURE TRG_FN_NPSS_CAMT53_STMT();  ALTER TABLE NPSS_CAMT53_STMT ENABLE TRIGGER HTG_NPSS_CAMT53_STMT ; ","params" : [] }]