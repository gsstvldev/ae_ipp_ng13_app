[{"query" : "CREATE TABLE NPSS_TRANSACTIONS ( NPSST_ID INTEGER NOT NULL , PRODUCT_CODE CHARACTER VARYING(16) NULL, VALUE_DATE TIMESTAMP WITHOUT TIME ZONE NULL, DBTR_ACCT_NO CHARACTER VARYING(20) NULL, DBTR_ACCT_NAME CHARACTER VARYING(128) NULL, DBTR_PHONE_NO CHARACTER VARYING(64) NULL, DBTR_EMAIL_ID CHARACTER VARYING(64) NULL, DBTR_DOCUMENT_ID CHARACTER VARYING(64) NULL, DBTR_IBAN CHARACTER VARYING(64) NULL, BASE_CURRENCY CHARACTER VARYING(3) NULL, BASE_AMOUNT NUMERIC(19,2) NULL, CDTR_ACCT_NO CHARACTER VARYING(20) NULL, CDTR_ACCT_NAME CHARACTER VARYING(100) NULL, CDTR_PHONE_NO CHARACTER VARYING(64) NULL, CDTR_EMAIL_ID CHARACTER VARYING(64) NULL, CDTR_DOCUMENT_ID CHARACTER VARYING(64) NULL, CDTR_IBAN CHARACTER VARYING(64) NULL, DR_SORT_CODE CHARACTER VARYING(9) NULL, CR_SORT_CODE CHARACTER VARYING(9) NULL, INTRBK_STTLM_CUR CHARACTER VARYING(3) NULL, INTRBK_STTLM_AMNT NUMERIC(19,2) NULL, RATE_CODE CHARACTER VARYING(4) NULL, EXCHANGE_RATE NUMERIC(9,2) NULL, CATEGORY_PURPOSE CHARACTER VARYING(64) NULL, HDR_MSG_ID CHARACTER VARYING(64) NULL, HDR_CREATED_DATE TIMESTAMP WITHOUT TIME ZONE NULL, HDR_TOTAL_RECORDS INTEGER NULL, HDR_TOTAL_AMOUNT NUMERIC(9,2) NULL, HDR_SETTLEMENT_DATE TIMESTAMP WITHOUT TIME ZONE NULL, HDR_SETTLEMENT_METHOD CHARACTER VARYING(64) NULL, HDR_CLEARING_SYSTEM CHARACTER VARYING(64) NULL, PAYMENT_ENDTOEND_ID CHARACTER VARYING(64) NULL, PAYMENT_TYPE CHARACTER VARYING(64) NULL, INSTRUMENT_TYPE CHARACTER VARYING(16) NULL, CHARGE_BEARER CHARACTER VARYING(16) NULL, UETR CHARACTER VARYING(64) NULL, MESSAGE_DATA CHARACTER VARYING(80000) NULL, EXHF_ID INTEGER NULL, PROCESS_TYPE CHARACTER VARYING(2) NULL, DBTR_CUST_TYPE CHARACTER VARYING(4) NULL, CHANNEL_ID CHARACTER VARYING(128) NULL, CHANNEL_REFNO CHARACTER VARYING(128) NULL, CHANNEL_USERID CHARACTER VARYING(128) NULL, CHANNEL_PRODUCT CHARACTER VARYING(128) NULL, CHANNEL_SUB_PRODUCT CHARACTER VARYING(128) NULL, CHANNEL_TRAN_CODE CHARACTER VARYING(3) NULL, CREATED_BY CHARACTER VARYING(256) NOT NULL,  CREATED_BY_NAME CHARACTER VARYING(256) , CREATED_DATE timestamp without time zone NOT NULL, MODIFIED_BY CHARACTER VARYING(256), MODIFIED_BY_NAME CHARACTER VARYING(256), MODIFIED_DATE timestamp without time zone, SYSTEM_ID CHARACTER VARYING(256),  SYSTEM_NAME CHARACTER VARYING(256),  PRCT_ID CHARACTER VARYING(256), CREATED_BY_STS_ID CHARACTER VARYING(256),  MODIFIED_BY_STS_ID CHARACTER VARYING(256),  STATUS CHARACTER VARYING(256), PROCESS_STATUS CHARACTER VARYING(256), DT_CODE CHARACTER VARYING(256), DT_DESCRIPTION CHARACTER VARYING(256) , DTT_CODE CHARACTER VARYING(256), DTT_DESCRIPTION CHARACTER VARYING(256), APP_ID CHARACTER VARYING(256), ROUTINGKEY CHARACTER VARYING(256), CREATED_CLIENTIP CHARACTER VARYING(256), CREATED_TZ CHARACTER VARYING(256), CREATED_TZ_OFFSET CHARACTER VARYING(256), CREATED_BY_SESSIONID CHARACTER VARYING(512), MODIFIED_CLIENTIP CHARACTER VARYING(256), MODIFIED_TZ CHARACTER VARYING(256), MODIFIED_TZ_OFFSET CHARACTER VARYING(256), MODIFIED_BY_SESSIONID CHARACTER VARYING(512), FX_RESV_DATE1 timestamp without time zone, FX_RESV_DATE2 timestamp without time zone, FX_RESV_DATE3 timestamp without time zone, FX_RESV_DATE4 timestamp without time zone, FX_RESV_DATE5 timestamp without time zone, FX_RESV_TEXT1 CHARACTER VARYING(256), FX_RESV_TEXT2 CHARACTER VARYING(256), FX_RESV_TEXT3 CHARACTER VARYING(256), FX_RESV_TEXT4 CHARACTER VARYING(256), FX_RESV_TEXT5 CHARACTER VARYING(256), CREATED_DATE_UTC timestamp without time zone, MODIFIED_DATE_UTC timestamp without time zone, VERSION_NO integer DEFAULT 0, TENANT_ID CHARACTER VARYING(256) , AI_ID CHARACTER VARYING(256)  ); CREATE SEQUENCE SEQ_NPSS_TRANSACTIONS INCREMENT 1 MINVALUE 1 MAXVALUE 9223372036854775807 START 1 CACHE 20;  ALTER TABLE NPSS_TRANSACTIONS ALTER COLUMN NPSST_ID SET DEFAULT nextval(''SEQ_NPSS_TRANSACTIONS'');  ALTER TABLE NPSS_TRANSACTIONS ADD CONSTRAINT NPSS_TRANSACTIONS_pkey primary key(NPSST_ID); ","params" : [] },{"query" : "CREATE OR REPLACE FUNCTION TRG_FN_NPSS_TRANSACTIONS() RETURNS trigger  LANGUAGE ''plpgsql''  COST 100  VOLATILE NOT LEAKPROOF  AS  $BODY$  DECLARE  BEGIN IF TG_OP = ''INSERT'' THEN  NEW.version_no = 1;  INSERT INTO HST_TRAN_DATA(TRAN_ID,PRCT_ID,VERSION_NO,DTT_CODE,STATUS,PROCESS_STATUS,TABLE_NAME, DTT_DESCRIPTION, NEW_DATA_JSON,CREATED_BY,CREATED_DATE,APP_ID,TENANT_ID,ROUTINGKEY)  SELECT NEW.NPSST_ID,NEW.PRCT_ID,NEW.VERSION_NO,NEW.DTT_CODE,NEW.STATUS,NEW.PROCESS_STATUS,TG_TABLE_NAME, NEW.DTT_DESCRIPTION,ROW_TO_JSON(ROW),NEW.CREATED_BY,NEW.CREATED_DATE,NEW.APP_ID,NEW.TENANT_ID,NEW.ROUTINGKEY FROM (SELECT NEW.*)ROW; ELSIF TG_OP = ''UPDATE'' THEN  NEW.version_no = OLD.version_no +1;  INSERT INTO HST_TRAN_DATA(TRAN_ID,PRCT_ID,VERSION_NO,DTT_CODE,STATUS,PROCESS_STATUS,TABLE_NAME, DTT_DESCRIPTION, NEW_DATA_JSON,OLD_DATA_JSON,CREATED_BY,CREATED_DATE,APP_ID,TENANT_ID,ROUTINGKEY)  SELECT NEW.NPSST_ID,NEW.PRCT_ID,NEW.VERSION_NO,NEW.DTT_CODE,NEW.STATUS,NEW.PROCESS_STATUS,TG_TABLE_NAME, NEW.DTT_DESCRIPTION,ROW_TO_JSON(ROW), ROW_TO_JSON(ROW1),NEW.MODIFIED_BY,NEW.MODIFIED_DATE,NEW.APP_ID,NEW.TENANT_ID,NEW.ROUTINGKEY FROM (SELECT NEW.*)ROW ,(SELECT OLD.*)ROW1; END IF; RETURN NEW; END; $BODY$;  CREATE TRIGGER HTG_NPSS_TRANSACTIONS BEFORE INSERT OR UPDATE  ON NPSS_TRANSACTIONS FOR EACH ROW  EXECUTE PROCEDURE TRG_FN_NPSS_TRANSACTIONS();  ALTER TABLE NPSS_TRANSACTIONS DISABLE TRIGGER HTG_NPSS_TRANSACTIONS ; ","params" : [] }]